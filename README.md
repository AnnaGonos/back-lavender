# Сайт для цветочного магазина

Работу выполнила: Гонос Анна M3307

https://m3307-gonos.onrender.com/

![ER-диаграмма](lavanda_db%20-%20public.png)


## Доменная область: Платформа для магазина цветов "Лаванда"

Представляет собой систему управления магазином, специализирующимся на продаже цветов и букетов. Она
включает функционал для работы с пользователями, заказами, отзывами, избранными товарами и корзиной. В центре системы
находится пользователь, который может выполнять различные действия в зависимости от своей роли (например, покупатель, 
администратор или флорист). Сайт разработан с целью увеличения количества покупателей и оборота цветов в целом. 


## Основные сущности:

### 1) User (пользователь):

- Основная сущность системы, представляющая клиента, администратора или флориста. Хранит персональные данные, информацию о бонусной программе, статусе и роли пользователя.
1. id - уникальный идентификатор пользователя.
2. firstName - имя пользователя, необязательно уникальное.
3. lastName - фамилия пользователя, необязательно уникальная.
4. middleName - отчество пользователя (опционально).
5. phone - номер телефона пользователя.
6. email - электронная почта пользователя.
7. password - хэшированный пароль пользователя.
8. bonusPoints - количество бонусных баллов пользователя.
9. bonusCardLevel - уровень бонусной карты пользователя.
10. totalOrders - общее количество заказов пользователя (используется для бонусной программы).
11. status - статус пользователя: ACTIVE, INACTIVE, BLOCKED.
12. type - роль пользователя: USER, ADMIN, FLORIST (Пользователь (покупатель), флорист, админ).
13. orders - список заказов пользователя.
14. reviews - список отзывов пользователя.
15. favorites - список избранных товаров пользователя.
16. cart - список товаров в корзине пользователя.


### 2) Product (Товар):

- Сущность, представляющая товар (букет, коробка для композиции и т.п.)
1. id - уникальный идентификатор товара.
2. name - название товара, необязательно уникальное.
3. category - категория, к которой принадлежит товар (ссылка на сущность Category).
4. composition - состав товара (опционально).
5. description - описание товара (опционально).
6. imageUrl - URL изображения товара (опционально).
7. imageDescription - описание изображения товара (опционально).
8. price - цена товара.
9. discount - новая скидочная цена товара (опционально).
10. quantityInStock - количество товара в магазине.
11. cartItems - список товаров, добавленных в корзину пользователя.
12. favorites - список товаров, добавленных в избранное пользователя.
13. createdAt - дата создания товара.

### 3) Category (Категория):

- Сущность, представляет собой категорию товара (например, "Монобукеты", "Свадебные букеты").
1. id - уникальный идентификатор категории.
2. name - название категории, необязательно уникальное.
3. description - описание категории (опционально).
4. products - список товаров, принадлежащих данной категории.

### 4) Review (Отзыв):
- Сущность, позволяющая пользователям оставлять отзывы о магазине
1. id - уникальный идентификатор отзыва.
2. user - пользователь, который оставил отзыв (ссылка на сущность User).
3. rating - оценка товара (число от 1 до 5).
4. description - текст отзыва (опционально).
5. createdAt - дата создания отзыва.
6. response - ответ на отзыв от администратора (опционально).
7. image - URL изображения, прикрепленного к отзыву (опционально).

### 5) Payment (Платежи):

- Сущность, отвечающая за обработку платежей
1. id - уникальный идентификатор платежа.
2. order - заказ, связанный с платежом (ссылка на сущность Order).
3. amount - сумма платежа.
4. method - метод оплаты: CASH, ONLINE.
5. status - статус платежа: PENDING, COMPLETED, FAILED, REFUNDED.
6. createdAt - дата создания платежа.
7. updatedAt - дата обновления платежа (опционально).

### 6) Order (Заказ):

- Сущность, представляющая собой заказ пользователя, включающий в себя информацию о товарах, доставке и платеже
1. id - уникальный идентификатор заказа.
2. user - пользователь, создавший заказ (ссылка на сущность User).
3. items - список товаров в заказе (ссылка на сущность OrderItem).
4. recipientName - имя получателя (опционально).
5. recipientPhone - телефон получателя (опционально).
6. totalAmount - общая сумма заказа.
7. bonusPointsUsed - количество использованных бонусных баллов.
8. deliveryInterval - интервал доставки (опционально).
9. deliveryAddress - адрес доставки (обязательно при выборе типа доставки COURIER).
10. status - статус заказа: CREATED, CONFIRMED, ASSEMBLED, DELIVERED, CANCELLED.
11. payments - список платежей по заказу (ссылка на сущность Payment).
12. paymentMethod - метод оплаты: CASH, CARD, ONLINE.
13. deliveryType - тип доставки: PICKUP, COURIER.
14. deliveryDate - дата доставки (опционально).
   
После оформления заказа, в группу работников магазина в телеграмме приходит уведомление с краткой информацией о выполненном заказе.


### 7) Order Item (Позиция заказа):

- Сущность, представляющая отдельный товар в заказе. Связана с сущностью "Заказ"
1. id - уникальный идентификатор товара в заказе.
2. order - заказ, к которому принадлежит товар (ссылка на сущность Order).
3. product - товар, добавленный в заказ (ссылка на сущность Product).
4. quantity - количество товара в заказе.
5. totalPrice - общая стоимость товара (вычисляется как price * quantity).

### 8) Корзина:

- Сущность, позволяющая добавлять товары в корзину:
1. id - уникальный идентификатор записи в корзине.
2. user - пользователь, который добавил товар в корзину (ссылка на сущность User).
3. product - товар, добавленный в корзину (ссылка на сущность Product).
4. quantity - количество товара в корзине (по умолчанию 1).
5. addedAt - дата добавления товара в корзину.

### 9) Favorite:

- Сущность, позволяющая пользователям добавлять товары в список избранного
1. id - уникальный идентификатор записи в избранном.
2. user - пользователь, который добавил товар в избранное (ссылка на сущность User).
3. product - товар, добавленный в избранное (ссылка на сущность Product).
4. addedAt - дата добавления товара в избранное.


## Основные требования системы:

### 1. Аккаунт
#### 1.1. Регистрация
- Пользователь имеет возможность зарегистрироваться, указав следующие данные:
  - Имя
  - Фамилия
  - Номер телефона
  - Электронная почта (уникальное поле)
  - Пароль

#### 1.2. Вход:
- Пользователь может войти в систему, используя:
  - Электронную почту
  - Пароль

#### 1.3. Управление аккаунтом: 
- Пользователь может редактировать информацию о себе: 
  - Изменить имя
  - Изменить фамилию
  - Добавить или изменить отчество (опциональное поле)
  - номер телефона

#### 1.4. Бонусная система:
- Пользователь может зайти в раздел программы лояльности и просмотреть количество бонусов на своем счету.
- Бонусы начисляются за каждую совершенную покупку. Размер бонусов зависит от количества совершенных покупок:
  - Чем больше покупок совершено, тем выше процент бонусов.
- Подробная информация о правилах начисления бонусов доступна на сайте в разделе "Программа лояльности".

### 2. Заказ:

#### 2.1. Корзина
- Пользователь может добавить товар в корзину. После добавления, товар отображается в разделе "Корзина", где пользователь может:
  - Увеличить количество товара.
  - Уменьшить количество товара.
  - Удалить конкретную позицию из корзины.
  - Очистить корзину полностью.
- В разделе "Корзина" пользователь видит:
  - Список товаров с их текущим количеством.
  - Общую стоимость всех товаров.
  - Сумму скидки (если она есть) за все товары в корзине.

#### 2.2. Избранное
- Пользователь может добавить товар в избранное для дальнейшего просмотра или покупки.
- Если товар закончился в магазине, пользователь увидит уведомление "Товар закончился".
  - При нажатии на уведомление пользователь перейдет в каталог, чтобы продолжить активность на сайте.

#### 2.3. Оформление заказа
- Все товары из корзины автоматически попадают в раздел "Оформление заказа".
- При оформлении заказа пользователь может:
  - Указать данные получателя (имя и номер телефона), если заказ получает другой человек.
  - Выбрать способ получения заказа:
    - Самовывоз.
    - Доставка курьером.
  - Указать дату и интервал доставки, удобные для получения заказа.
  - Указать адрес доставки (обязательно при выборе доставки курьером).
  - Выбрать способ оплаты (см. п. 2.4).
  - Решить, использовать ли бонусы для оплаты заказа или копить их.

#### 2.4. Оплата заказа:
- На данный момент поддерживается только оплата наличными при получении заказа.
- В будущем планируется расширение функционала до онлайн-оплаты через ЮKassa.

### 3. Флорист/Админ
   (на данный момент разницы пока между ними нет, но в дальнейшем для админа будет расширены возможности работы в аккаунте флориста)
#### 3.1. Аккаунт флориста:
- Имеет свой аккаунт (по сути раздел который виден только им)
- В аккаунте есть данные разделы: категории, товары, отзывы, заказы

#### 3.2. Категории
- Флорист имеет возможность: добавить, редактировать и удалить категорию.
- Создание категории
  - При создании категории указываются следующие поля:
    - Название
    - Описание (опционально)
- Редактирование категории
  - Флорист имеет возможность редактировать следующие поля:
    - Название 
    - Описание
- Удаление категории возможно просто по клину на соответствующую кнопку возле категории, которую хотят удалить.

#### 3.3. Товары

- Флорист имеет возможно: доабвлять, редактировать, архивировать и удалить товар из каталога
- Добавление товара:
  - При добавлении товара указываются следующие поля
    - Название товара
    - Описание товара
    - Количество товара в магазине
    - Цена
    - Цена со скидкой (опционально, сразу можно и не указывать)
    - Изображение товара
    - Описание изображения (опционально)
- Редактирование товара (можем редактировать любые поля из предыдущего пункта)
- Архивирование товара
  - При нажатии соответствующей кнопки возле товара, количество товара автоматически становится равно 0.
- Удаление товара
  - Удаляется товар из БД без возможности вернуть

#### 3.4.Заказы:
- Флорист, как и пользователь, может просматривать товары
- Имеет возможность поменять статус заказа:
  - После оформления заказа флорист должен либо подтвердить заказ, либо отменить (есть такой букет в магазине закончился) - "Подтвержденный", "Отмененный".
  - После сборки опять же меняем статус заказа на "собранный"
  - После того как заказ забрали - "Доставленный"

#### 3.5. Отзывы (еще в разработке:

- Флорист может просматривать и отвечать на отзывы

